(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function l(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,s(t,e,"get"))}function h(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,s(t,e,"set"),r),r}t.r(e),t.d(e,{HppIntegrationApi:()=>xt});const f={addExternalCallbacks:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.onSuccess,r=t.onFail,n=t.onComplete,o=t.core;o?(e instanceof Function&&o.setSuccessListener(e),r instanceof Function&&o.setFailListener(r),n instanceof Function&&o.setCompleteListener(n)):console.debug("addExternalCallbacks: core is undefined")}},p="PREPARING",d="WAITPUSHTRAN",y="PARTPAID",v="FULLYPAID",g="AUTHORIZED",m="PAID",w="NOT_PAID",b="CANCELLED",x="EXPIRED",L="CLOSED",E="DISPUTED",P="REJECTED",k="REFUSED",O="standard",S="1",_="Success",j="Failed";function A(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */function t(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}function e(t,e,r,n){var i=e&&e.prototype instanceof o?e:o,a=Object.create(i.prototype),c=new p(n||[]);return w(a,"_invoke",{value:s(t,r,c)}),a}function n(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function a(){}function c(e){["next","throw","return"].forEach((function(r){t(e,r,(function(t){return this._invoke(r,t)}))}))}function u(t,e){function o(i,a,c,u){var s=n(t[i],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==r(h)&&m.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var i;w(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function s(t,e,r){var o="suspendedStart";return function(i,a){if("executing"==o)throw new Error("Generator is already running");if("completed"==o){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=l(c,r);if(u){if(u===P)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"==o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var s=n(t,e,r);if("normal"===s.type){if(o=r.done?"completed":"suspendedYield",s.arg===P)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o="completed",r.method="throw",r.arg=s.arg)}}}function l(t,e){var r=e.method,o=t.iterator[r];if(void 0===o)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,l(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),P;var i=n(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,P;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,P):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(m.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}A=function(){return v};var v={},g=Object.prototype,m=g.hasOwnProperty,w=Object.defineProperty||function(t,e,r){t[e]=r.value},b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",L=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(t,e,r){return t[e]=r}}v.wrap=e;var P={},k={};t(k,x,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(d([])));S&&S!==g&&m.call(S,x)&&(k=S);var _=a.prototype=o.prototype=Object.create(k);return i.prototype=a,w(_,"constructor",{value:a,configurable:!0}),w(a,"constructor",{value:i,configurable:!0}),i.displayName=t(a,E,"GeneratorFunction"),v.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},v.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,E,"GeneratorFunction")),e.prototype=Object.create(_),e},v.awrap=function(t){return{__await:t}},c(u.prototype),t(u.prototype,L,(function(){return this})),v.AsyncIterator=u,v.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new u(e(t,r,n,o),i);return v.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},c(_),t(_,E,"Generator"),t(_,x,(function(){return this})),t(_,"toString",(function(){return"[object Generator]"})),v.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},v.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),c=m.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r,n=this.tryEntries.length-1;0<=n;--n)if((r=this.tryEntries[n]).tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,P):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),f(e),P},catch:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;f(e)}return o}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:d(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),P}},v}var F={lockArea:function(t){if(t instanceof Element){var e=document.createElement("div");t.style.position="relative",t.style.cursor="default",e.classList.add("cp-locker"),e.style.height="100%",e.style.width="100%",e.style.left="0",e.style.position="absolute",e.style.top="0",e.style.zIndex="999",e.addEventListener("click",(function(t){return t.stopPropagation()})),e.addEventListener("touch",(function(t){return t.stopPropagation()})),t.appendChild(e)}},unlockArea:function(t){if(t instanceof Element){var e=t.querySelector(".cp-locker");t.style.removeProperty("position"),t.style.removeProperty("cursor"),e&&t.removeChild(e)}},createHppUrl:function(t){var e=t.txpgFesHppUrl,r=void 0===e?"":e,n=t.orderAuthData,o=void 0===n?{}:n,i=t.ecFlow,a=t.aPayAllowed,c=t.widgetId,u=o.accessToken,s=o.id,l=o.password,h=new URL(r);return F.isValidValue(u)?h.searchParams.append("at",u):(h.searchParams.append("id",s),h.searchParams.append("password",l)),h.searchParams.append("mode","widget"),h.searchParams.append("aPayAllowed",(void 0!==a&&a).toString()),i&&h.searchParams.append("flow",i),h.searchParams.append("widgetId",c),h},getUrlWithOrderAuthParams:function(t,e){var r=e.accessToken,n=e.password;return F.isValidValue(r)?new URL("".concat(t,"?accessToken=").concat(encodeURIComponent(r))):new URL("".concat(t,"?password=").concat(encodeURIComponent(n)))},orderAuthParamsAreValid:function(t){var e=(null==t?void 0:t.accessToken)||(null==t?void 0:t.at)||"",r=t.id,n=t.password;return F.isValidValue(e)||F.isValidValue(r)&&F.isValidValue(n)},getOrderAuthRequisites:function(t){var e=(null==t?void 0:t.accessToken)||(null==t?void 0:t.at)||"",r=t.id,n=t.password;return F.isValidValue(e)?{accessToken:e}:{id:r,password:n}},callSuccessHandler:function(t,e){return o(A().mark((function r(){return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t.listeners.onSuccess instanceof Function)){r.next=3;break}return r.next=3,t.listeners.onSuccess(e);case 3:return r.next=5,F.callCompleteHandler(t,e);case 5:case"end":return r.stop()}}),r)})))()},callErrorHandler:function(t,e){return o(A().mark((function r(){var n,o;return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.data,o=e.error,!(t.listeners.onFail instanceof Function)){r.next=4;break}return r.next=4,t.listeners.onFail(n,o);case 4:return r.next=6,F.callCompleteHandler(t,n);case 6:case"end":return r.stop()}}),r)})))()},callCompleteHandler:function(t,e){return o(A().mark((function r(){return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t.listeners.onComplete instanceof Function)){r.next=3;break}return r.next=3,t.listeners.onComplete(e);case 3:case"end":return r.stop()}}),r)})))()},orderIsPaid:function(){return[y,v,m,g].includes((0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").toUpperCase())},orderIsPending:function(){return[d,p].includes((0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").toUpperCase())},orderIsUnpaid:function(){return[b,x,L,w,E,P,k].includes((0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").toUpperCase())},isValidValue:function(t){return!!t&&"undefined"!==t&&"null"!==t&&"NaN"!==t}};const T=F;function I(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */function t(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}function e(t,e,r,n){var i=e&&e.prototype instanceof o?e:o,a=Object.create(i.prototype),c=new p(n||[]);return w(a,"_invoke",{value:s(t,r,c)}),a}function n(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function a(){}function c(e){["next","throw","return"].forEach((function(r){t(e,r,(function(t){return this._invoke(r,t)}))}))}function u(t,e){function o(i,a,c,u){var s=n(t[i],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==r(h)&&m.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var i;w(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function s(t,e,r){var o="suspendedStart";return function(i,a){if("executing"==o)throw new Error("Generator is already running");if("completed"==o){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=l(c,r);if(u){if(u===P)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"==o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var s=n(t,e,r);if("normal"===s.type){if(o=r.done?"completed":"suspendedYield",s.arg===P)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o="completed",r.method="throw",r.arg=s.arg)}}}function l(t,e){var r=e.method,o=t.iterator[r];if(void 0===o)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,l(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),P;var i=n(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,P;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,P):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(m.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}I=function(){return v};var v={},g=Object.prototype,m=g.hasOwnProperty,w=Object.defineProperty||function(t,e,r){t[e]=r.value},b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",L=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(t,e,r){return t[e]=r}}v.wrap=e;var P={},k={};t(k,x,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(d([])));S&&S!==g&&m.call(S,x)&&(k=S);var _=a.prototype=o.prototype=Object.create(k);return i.prototype=a,w(_,"constructor",{value:a,configurable:!0}),w(a,"constructor",{value:i,configurable:!0}),i.displayName=t(a,E,"GeneratorFunction"),v.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},v.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,E,"GeneratorFunction")),e.prototype=Object.create(_),e},v.awrap=function(t){return{__await:t}},c(u.prototype),t(u.prototype,L,(function(){return this})),v.AsyncIterator=u,v.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new u(e(t,r,n,o),i);return v.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},c(_),t(_,E,"Generator"),t(_,x,(function(){return this})),t(_,"toString",(function(){return"[object Generator]"})),v.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},v.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),c=m.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r,n=this.tryEntries.length-1;0<=n;--n)if((r=this.tryEntries[n]).tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,P):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),f(e),P},catch:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;f(e)}return o}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:d(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),P}},v}var N={createWidgetWithApplePay:function(t){return o(I().mark((function e(){var r,n,o,i,a,c;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.provideStore(),!r.getValueByKey("ecNeedCreateOrder")){e.next=11;break}return e.next=5,B.createOrder(t);case 5:n=e.sent,o=n.order,i=void 0===o?{}:o,a=T.getOrderAuthRequisites(i),r.setValueByKey("orderAuthData",a),r.setValueByKey("ecNeedCreateOrder",!1);case 11:return e.next=13,N.checkApplePay(t);case 13:c=e.sent,r.setValueByKey("aPayAllowed",c);case 15:case"end":return e.stop()}}),e)})))()},preparingApplePay:function(t){try{var e=t.provideStore(),r=e.getValueByKey("hppIFrame");r=r.cloneNode(!0);var n=e.getValueByKey("applePayPaymentData",{}),i=new ApplePaySession(1,n);i.onvalidatemerchant=function(){var e=o(I().mark((function e(r){var n,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.createCtsSession(t,r);case 3:n=e.sent,o=n.sessionData,i.completeMerchantValidation(o),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),N.cancelAPayment(t);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),i.oncancel=function(){return N.cancelAPayment(t)},i.onpaymentauthorized=function(){var n=o(I().mark((function n(o){var i,a;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=o.payment;try{a=JSON.stringify(i.token.paymentData),r.contentWindow.postMessage({applePaymentAuthorized:!0,paymentData:a},e.getValueByKey("hppUrl"))}catch(e){N.cancelAPayment(t)}case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),e.setValueByKey("aPaySession",i)}catch(t){throw console.error(t),t}},checkApplePay:function(t){return o(I().mark((function e(){var r,n,o,i,a,c,u,s,l,h,f,p,d;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getOrder(t);case 2:if(r=e.sent,n=r.order,i=(o=void 0===n?{}:n).merchant,a=(void 0===i?{}:i).merchantCts,u=!1,0!==(c=void 0===a?[]:a).length){e.next=9;break}return e.abrupt("return",u);case 9:if(s=c.find((function(){return"ApplePay"===(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).cts})),l=s.allowed,h=void 0!==l&&l,f=s.merchantRid,p=void 0===f?"":f,h){e.next=12;break}return e.abrupt("return",u);case 12:if(!(d=window.ApplePaySession)||!d.canMakePayments()){e.next=20;break}return e.next=16,d.canMakePaymentsWithActiveCard(p);case 16:if(!(u=e.sent)){e.next=20;break}return e.next=20,N.setApplePaymentData(t,{order:o});case 20:return e.abrupt("return",u);case 21:case"end":return e.stop()}}),e)})))()},setApplePaymentData:function(t,e){return o(I().mark((function r(){var n,o,i,a,c,u,s,l,h,f,p,d,y,v,g,m,w;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.order,o=t.provideStore(),i=o.getValueByKey("applePaySurchargeAmount"),r.next=5,H.setSrcToken(t);case 5:a=r.sent,c=a.order,u=(void 0===c?{}:c).surcharge,l=(s=void 0===u?{}:u).status,h=s.srcAmount,"Charge"===l&&h&&o.setValueByKey("applePaySurchargeAmount",h),f=n.merchant.merchantCts,p=f.find((function(t){return"ApplePay"===t.cts})),d=p.applePay,v=(y=void 0===d?{}:d).capabilities,g=y.networks,m=["supports3DS"],w=i?+n.amount+ +i:n.amount,o.setValueByKey("applePayPaymentData",{countryCode:n.merchant.businessAddress.countryA2,currencyCode:n.currency,total:{label:n.description||"Pay by Apple Pay",amount:w},supportedNetworks:g,merchantCapabilities:m.concat(v)});case 20:case"end":return r.stop()}}),r)})))()},payByApplePay:function(t){var e=t.provideStore().getValueByKey("aPaySession");e&&e.begin()},cancelAPayment:function(t){var e=t.provideStore(),r=e.getValueByKey("aPaySession");if(r){try{r.completePayment(r.STATUS_FAILURE)}catch(t){console.debug(t)}e.removeValueByKey("applePayPaymentData"),e.removeValueByKey("aPaySession");var n=e.getValueByKey("hppIFrame");(n=n.cloneNode(!0)).contentWindow.postMessage({needDestroyApplePayMethod:!0},e.getValueByKey("hppUrl"))}},resetAPaySession:function(t){t.provideStore().removeValueByKey("aPaySession")}};const G=N;function V(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */function t(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}function e(t,e,r,n){var i=e&&e.prototype instanceof o?e:o,a=Object.create(i.prototype),c=new p(n||[]);return w(a,"_invoke",{value:s(t,r,c)}),a}function n(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function a(){}function c(e){["next","throw","return"].forEach((function(r){t(e,r,(function(t){return this._invoke(r,t)}))}))}function u(t,e){function o(i,a,c,u){var s=n(t[i],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==r(h)&&m.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var i;w(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function s(t,e,r){var o="suspendedStart";return function(i,a){if("executing"==o)throw new Error("Generator is already running");if("completed"==o){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=l(c,r);if(u){if(u===P)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"==o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var s=n(t,e,r);if("normal"===s.type){if(o=r.done?"completed":"suspendedYield",s.arg===P)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o="completed",r.method="throw",r.arg=s.arg)}}}function l(t,e){var r=e.method,o=t.iterator[r];if(void 0===o)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,l(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),P;var i=n(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,P;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,P):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(m.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}V=function(){return v};var v={},g=Object.prototype,m=g.hasOwnProperty,w=Object.defineProperty||function(t,e,r){t[e]=r.value},b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",L=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(t,e,r){return t[e]=r}}v.wrap=e;var P={},k={};t(k,x,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(d([])));S&&S!==g&&m.call(S,x)&&(k=S);var _=a.prototype=o.prototype=Object.create(k);return i.prototype=a,w(_,"constructor",{value:a,configurable:!0}),w(a,"constructor",{value:i,configurable:!0}),i.displayName=t(a,E,"GeneratorFunction"),v.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},v.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,E,"GeneratorFunction")),e.prototype=Object.create(_),e},v.awrap=function(t){return{__await:t}},c(u.prototype),t(u.prototype,L,(function(){return this})),v.AsyncIterator=u,v.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new u(e(t,r,n,o),i);return v.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},c(_),t(_,E,"Generator"),t(_,x,(function(){return this})),t(_,"toString",(function(){return"[object Generator]"})),v.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},v.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),c=m.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r,n=this.tryEntries.length-1;0<=n;--n)if((r=this.tryEntries[n]).tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,P):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),f(e),P},catch:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;f(e)}return o}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:d(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),P}},v}var C={createOrder:function(t){return o(V().mark((function e(){var r,n,o,i,a,c;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.provideStore(),n=r.getValueByKey("orderDetails",{}),o={"Content-Type":"application/json",Authorization:r.getValueByKey("authorizationHeader")},i=new URL("".concat(t.getTxpgFesApiGatewayUrl(),"/order")),e.next=6,fetch(i.href,{method:"POST",headers:o,body:JSON.stringify(n)});case 6:if(a=e.sent,!(c=a.json()).hasOwnProperty("errorCode")){e.next=10;break}throw c;case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})))()},getOrder:function(t){return o(V().mark((function e(){var r,n,o,i,a,c,u;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.provideStore(),n={"Content-Type":"application/json",Authorization:"Basic ".concat(btoa("'':' '"))},o=r.getValueByKey("orderAuthData",{}),i=(null==o?void 0:o.id)||S,a=T.getUrlWithOrderAuthParams("".concat(t.getTxpgFesApiGatewayUrl(),"/order/").concat(i),o),e.next=7,fetch(a.href,{headers:n});case 7:return c=e.sent,e.next=10,c.json();case 10:if(!(u=e.sent).hasOwnProperty("errorCode")){e.next=13;break}throw u;case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)})))()}};const B=C;function K(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */function t(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}function e(t,e,r,n){var i=e&&e.prototype instanceof o?e:o,a=Object.create(i.prototype),c=new p(n||[]);return w(a,"_invoke",{value:s(t,r,c)}),a}function n(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function a(){}function c(e){["next","throw","return"].forEach((function(r){t(e,r,(function(t){return this._invoke(r,t)}))}))}function u(t,e){function o(i,a,c,u){var s=n(t[i],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==r(h)&&m.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var i;w(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function s(t,e,r){var o="suspendedStart";return function(i,a){if("executing"==o)throw new Error("Generator is already running");if("completed"==o){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=l(c,r);if(u){if(u===P)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"==o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var s=n(t,e,r);if("normal"===s.type){if(o=r.done?"completed":"suspendedYield",s.arg===P)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o="completed",r.method="throw",r.arg=s.arg)}}}function l(t,e){var r=e.method,o=t.iterator[r];if(void 0===o)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,l(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),P;var i=n(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,P;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,P):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(m.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}K=function(){return v};var v={},g=Object.prototype,m=g.hasOwnProperty,w=Object.defineProperty||function(t,e,r){t[e]=r.value},b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",L=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(t,e,r){return t[e]=r}}v.wrap=e;var P={},k={};t(k,x,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(d([])));S&&S!==g&&m.call(S,x)&&(k=S);var _=a.prototype=o.prototype=Object.create(k);return i.prototype=a,w(_,"constructor",{value:a,configurable:!0}),w(a,"constructor",{value:i,configurable:!0}),i.displayName=t(a,E,"GeneratorFunction"),v.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},v.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,E,"GeneratorFunction")),e.prototype=Object.create(_),e},v.awrap=function(t){return{__await:t}},c(u.prototype),t(u.prototype,L,(function(){return this})),v.AsyncIterator=u,v.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new u(e(t,r,n,o),i);return v.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},c(_),t(_,E,"Generator"),t(_,x,(function(){return this})),t(_,"toString",(function(){return"[object Generator]"})),v.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},v.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),c=m.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r,n=this.tryEntries.length-1;0<=n;--n)if((r=this.tryEntries[n]).tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,P):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),f(e),P},catch:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;f(e)}return o}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:d(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),P}},v}const U={getWidgetMarkup:function(t,e){return o(K().mark((function r(){var n,o,i;return K().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.visibleMode,o=t.provideStore(),r.next=4,fetch("".concat(t.getTxpgFesServerHppUrl(),"/widget/widget"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign({mode:n,auth:{userName:o.getValueByKey("userName"),password:o.getValueByKey("userPassword")},terminalId:o.getValueByKey("terminalId"),merchantId:o.getValueByKey("merchantId"),widgetId:o.getValueByKey("widgetId",O)},o.getValueByKey("orderDetails",{})))});case 4:return i=r.sent,r.next=7,i.text();case 7:return r.abrupt("return",r.sent);case 8:case"end":return r.stop()}}),r)})))()}};function W(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */function t(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}function e(t,e,r,n){var i=e&&e.prototype instanceof o?e:o,a=Object.create(i.prototype),c=new p(n||[]);return w(a,"_invoke",{value:s(t,r,c)}),a}function n(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function a(){}function c(e){["next","throw","return"].forEach((function(r){t(e,r,(function(t){return this._invoke(r,t)}))}))}function u(t,e){function o(i,a,c,u){var s=n(t[i],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==r(h)&&m.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var i;w(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function s(t,e,r){var o="suspendedStart";return function(i,a){if("executing"==o)throw new Error("Generator is already running");if("completed"==o){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=l(c,r);if(u){if(u===P)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"==o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var s=n(t,e,r);if("normal"===s.type){if(o=r.done?"completed":"suspendedYield",s.arg===P)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o="completed",r.method="throw",r.arg=s.arg)}}}function l(t,e){var r=e.method,o=t.iterator[r];if(void 0===o)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,l(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),P;var i=n(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,P;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,P):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(m.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}W=function(){return v};var v={},g=Object.prototype,m=g.hasOwnProperty,w=Object.defineProperty||function(t,e,r){t[e]=r.value},b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",L=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(t,e,r){return t[e]=r}}v.wrap=e;var P={},k={};t(k,x,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(d([])));S&&S!==g&&m.call(S,x)&&(k=S);var _=a.prototype=o.prototype=Object.create(k);return i.prototype=a,w(_,"constructor",{value:a,configurable:!0}),w(a,"constructor",{value:i,configurable:!0}),i.displayName=t(a,E,"GeneratorFunction"),v.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},v.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,E,"GeneratorFunction")),e.prototype=Object.create(_),e},v.awrap=function(t){return{__await:t}},c(u.prototype),t(u.prototype,L,(function(){return this})),v.AsyncIterator=u,v.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new u(e(t,r,n,o),i);return v.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},c(_),t(_,E,"Generator"),t(_,x,(function(){return this})),t(_,"toString",(function(){return"[object Generator]"})),v.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},v.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),c=m.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r,n=this.tryEntries.length-1;0<=n;--n)if((r=this.tryEntries[n]).tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,P):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),f(e),P},catch:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;f(e)}return o}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:d(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),P}},v}const H={setSrcToken:function(t){return o(W().mark((function e(){var r,n,o,i,a,c;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.provideStore(),n=r.getValueByKey("orderAuthData",{}),o=(null==n?void 0:n.id)||S,i=T.getUrlWithOrderAuthParams("".concat(t.getTxpgFesApiGatewayUrl(),"/order/").concat(o,"/set-src-token"),n),e.next=6,fetch(i.href,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(btoa("'':' '"))},body:JSON.stringify({token:{applePayBlock:""}})});case 6:return a=e.sent,e.next=9,a.json();case 9:if(!(c=e.sent).hasOwnProperty("errorCode")){e.next=12;break}throw c;case 12:return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})))()}};function M(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */function t(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}function e(t,e,r,n){var i=e&&e.prototype instanceof o?e:o,a=Object.create(i.prototype),c=new p(n||[]);return w(a,"_invoke",{value:s(t,r,c)}),a}function n(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function a(){}function c(e){["next","throw","return"].forEach((function(r){t(e,r,(function(t){return this._invoke(r,t)}))}))}function u(t,e){function o(i,a,c,u){var s=n(t[i],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==r(h)&&m.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var i;w(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function s(t,e,r){var o="suspendedStart";return function(i,a){if("executing"==o)throw new Error("Generator is already running");if("completed"==o){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=l(c,r);if(u){if(u===P)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"==o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var s=n(t,e,r);if("normal"===s.type){if(o=r.done?"completed":"suspendedYield",s.arg===P)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o="completed",r.method="throw",r.arg=s.arg)}}}function l(t,e){var r=e.method,o=t.iterator[r];if(void 0===o)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,l(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),P;var i=n(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,P;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,P):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(m.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}M=function(){return v};var v={},g=Object.prototype,m=g.hasOwnProperty,w=Object.defineProperty||function(t,e,r){t[e]=r.value},b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",L=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(t,e,r){return t[e]=r}}v.wrap=e;var P={},k={};t(k,x,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(d([])));S&&S!==g&&m.call(S,x)&&(k=S);var _=a.prototype=o.prototype=Object.create(k);return i.prototype=a,w(_,"constructor",{value:a,configurable:!0}),w(a,"constructor",{value:i,configurable:!0}),i.displayName=t(a,E,"GeneratorFunction"),v.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},v.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,E,"GeneratorFunction")),e.prototype=Object.create(_),e},v.awrap=function(t){return{__await:t}},c(u.prototype),t(u.prototype,L,(function(){return this})),v.AsyncIterator=u,v.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new u(e(t,r,n,o),i);return v.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},c(_),t(_,E,"Generator"),t(_,x,(function(){return this})),t(_,"toString",(function(){return"[object Generator]"})),v.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},v.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),c=m.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r,n=this.tryEntries.length-1;0<=n;--n)if((r=this.tryEntries[n]).tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,P):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),f(e),P},catch:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;f(e)}return o}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:d(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),P}},v}var D={createCtsSession:function(t,e){return o(M().mark((function r(){var n,o,i,a,c,u,s,l;return M().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.validationURL,o=void 0===n?"":n,i=t.provideStore(),a=i.getValueByKey("orderAuthData",{}),c=(null==a?void 0:a.id)||S,u=T.getUrlWithOrderAuthParams("".concat(t.getTxpgFesApiGatewayUrl(),"/order/").concat(c,"/create-cts-session"),a),r.next=7,fetch(u.href,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(btoa("'':' '"))},body:JSON.stringify({cts:"ApplePay",validationUrl:o})});case 7:return s=r.sent,r.next=10,s.json();case 10:if(!(l=r.sent).hasOwnProperty("errorCode")){r.next=13;break}throw l;case 13:return r.abrupt("return",l);case 14:case"end":return r.stop()}}),r)})))()}};const R=D;function z(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */function t(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}function e(t,e,r,n){var i=e&&e.prototype instanceof o?e:o,a=Object.create(i.prototype),c=new p(n||[]);return w(a,"_invoke",{value:s(t,r,c)}),a}function n(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function a(){}function c(e){["next","throw","return"].forEach((function(r){t(e,r,(function(t){return this._invoke(r,t)}))}))}function u(t,e){function o(i,a,c,u){var s=n(t[i],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==r(h)&&m.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var i;w(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function s(t,e,r){var o="suspendedStart";return function(i,a){if("executing"==o)throw new Error("Generator is already running");if("completed"==o){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=l(c,r);if(u){if(u===P)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"==o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var s=n(t,e,r);if("normal"===s.type){if(o=r.done?"completed":"suspendedYield",s.arg===P)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o="completed",r.method="throw",r.arg=s.arg)}}}function l(t,e){var r=e.method,o=t.iterator[r];if(void 0===o)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,l(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),P;var i=n(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,P;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,P):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(m.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}z=function(){return v};var v={},g=Object.prototype,m=g.hasOwnProperty,w=Object.defineProperty||function(t,e,r){t[e]=r.value},b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",L=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(t,e,r){return t[e]=r}}v.wrap=e;var P={},k={};t(k,x,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(d([])));S&&S!==g&&m.call(S,x)&&(k=S);var _=a.prototype=o.prototype=Object.create(k);return i.prototype=a,w(_,"constructor",{value:a,configurable:!0}),w(a,"constructor",{value:i,configurable:!0}),i.displayName=t(a,E,"GeneratorFunction"),v.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},v.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,E,"GeneratorFunction")),e.prototype=Object.create(_),e},v.awrap=function(t){return{__await:t}},c(u.prototype),t(u.prototype,L,(function(){return this})),v.AsyncIterator=u,v.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new u(e(t,r,n,o),i);return v.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},c(_),t(_,E,"Generator"),t(_,x,(function(){return this})),t(_,"toString",(function(){return"[object Generator]"})),v.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},v.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),c=m.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r,n=this.tryEntries.length-1;0<=n;--n)if((r=this.tryEntries[n]).tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,P):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),f(e),P},catch:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;f(e)}return o}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:d(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),P}},v}var Y={onClickPayButton:function(t,e){return o(z().mark((function r(){var n,o,i,a,c,u,s,l,h,f,p;return z().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&T.lockArea(e),n=t.provideStore(),o=n.getValueByKey("ecFlow"),i=n.getValueByKey("ecNeedCreateOrder"),a=null,r.prev=5,c="true"===n.getValueByKey("aPayAllowed","false").toString(),a=ct.createIFrameContainer(t),document.body.appendChild(a),!c){r.next=14;break}return r.next=12,G.preparingApplePay(t);case 12:r.next=22;break;case 14:if(!i||"true"===t.getNeedSupportApplePay()||"withPredefinedCard"===o){r.next=22;break}return r.next=17,B.createOrder(t);case 17:u=r.sent,s=u.order,l=T.getOrderAuthRequisites(s),n.setValueByKey("orderAuthData",l),n.setValueByKey("ecNeedCreateOrder",!1);case 22:h=n.getValueByKey("orderAuthData",{}),f={txpgFesHppUrl:n.getValueByKey("hppUrl"),orderAuthData:h,ecFlow:o,aPayAllowed:c,widgetId:n.getValueByKey("widgetId")},p=T.createHppUrl(f),n.setValueByKey("hppIFrame",ct.createHppIFrame({hppUrl:p,iFrameContainer:a})),r.next=34;break;case 28:return r.prev=28,r.t0=r.catch(5),console.error(r.t0),a instanceof Element&&document.body.removeChild(a),r.next=34,ct.closeIFrame(t).then((function(){return T.callErrorHandler(t,{error:r.t0})}));case 34:return r.prev=34,e&&T.unlockArea(e),r.finish(34);case 37:case"end":return r.stop()}}),r,null,[[5,28,34,37]])})))()}};const q=Y;var X="only screen and (max-width: 20em)",J="only screen and (min-width: 20em) and (max-width: 22em)",Q="only screen and (min-width: 22em) and (max-width: 40em)",Z="only screen and (min-width: 40em) and (min-width: 700px)",$={minHeight:"100vh",width:"100vw",top:"0",left:"0",transform:"inherit",borderRadius:"0"},tt={minHeight:"738px",width:"414px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"10px"},et={onMessageHandler:function(t,e){function r(){var t=n.getValueByKey("aPayAllowed"),e=n.getValueByKey("applePaySurchargeAmount");t&&e&&i.contentWindow.postMessage({needSetApplePaySurcharge:!0,applePaySurcharge:e},n.getValueByKey("hppUrl"))}var n=e.provideStore(),o=new URL(n.getValueByKey("hppUrl")).origin;if(t.origin===o){var i=n.getValueByKey("hppIFrame"),a=t.data,c=a.actionId,u=a.step,s=a.order;switch(c){case"applePayHandling":try{var l=n.getValueByKey("aPaySession");"pay"===u?l&&G.payByApplePay(e):"paymentPaid"===u?(l.completePayment(l.STATUS_SUCCESS),G.resetAPaySession(e)):"paymentUnpaid"===u?G.cancelAPayment(e):"needCheckSurcharge"===u&&r()}catch(t){console.error(t),G.cancelAPayment(e)}break;case"authenticationOnly":e.onSuccessHandler(s);break;case"widgetOnload":i.style.display="block";break;case"pageRendering":var h=t.data.pageRenderingMessageData,f=(void 0===h?{}:h).status;f===j?e.onErrorHandler(s,t.data.pageRenderingMessageData.error):f===_&&(i.style.display="block");break;case"needCheckSurcharge":r();break;case"electronicCertificatePay":"withPredefinedCard"!==n.getValueByKey("ecFlow","withPredefinedCard")&&n.setValueByKey("ecFlow","withPredefinedCard"),e.onSuccessHandler(s);break;case"paymentWasFinished":var p=s.STATUS,d=void 0===p?"":p;T.orderIsPaid(d)?e.onSuccessHandler(s):e.onErrorHandler(s)}}},onResizeWindowForWidget:function(t){var e=t.querySelectorAll(".ps-logo"),r=t.querySelector(".other-logos"),n=t.querySelector(".qr-container");e.forEach((function(t){return t.style.display="block"})),r.style.display="none",window.matchMedia(Z).matches?(n.style.display="block",e.forEach((function(t){return t.style.margin="2.5px"}))):window.matchMedia(Q).matches?e.forEach((function(t){return t.style.margin="0 1px"})):window.matchMedia(X).matches&&(e[0].parentElement.style.padding="1%",e.forEach((function(t){return t.style.margin="0 1%"}))),(window.matchMedia(J).matches||window.matchMedia(X).matches)&&6<e.length&&(Array.from(e).slice(5).forEach((function(t){return t.style.display="none"})),r.style.display="block"),window.matchMedia(Z).matches||(n.style.display="none")},onResizeWindowForHppIFrame:function(t){window.matchMedia(Q).matches||window.matchMedia(J).matches?Object.assign(t.style,$):window.matchMedia(Z).matches&&Object.assign(t.style,tt)}};const rt=et;const nt={addMediaQueryListenerForWidget:function(t){window.addEventListener("resize",(function(){return rt.onResizeWindowForWidget(t)})),rt.onResizeWindowForWidget(t)},addMediaQueryListenerForIFrame:function(t){window.addEventListener("resize",(function(){return rt.onResizeWindowForHppIFrame(t)})),rt.onResizeWindowForHppIFrame(t)},addMessageEventListeners:function(t){window.addEventListener("message",(function(e){return rt.onMessageHandler(e,t)}))}};function ot(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */function t(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}function e(t,e,r,n){var i=e&&e.prototype instanceof o?e:o,a=Object.create(i.prototype),c=new p(n||[]);return w(a,"_invoke",{value:s(t,r,c)}),a}function n(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function a(){}function c(e){["next","throw","return"].forEach((function(r){t(e,r,(function(t){return this._invoke(r,t)}))}))}function u(t,e){function o(i,a,c,u){var s=n(t[i],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==r(h)&&m.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var i;w(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function s(t,e,r){var o="suspendedStart";return function(i,a){if("executing"==o)throw new Error("Generator is already running");if("completed"==o){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=l(c,r);if(u){if(u===P)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"==o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var s=n(t,e,r);if("normal"===s.type){if(o=r.done?"completed":"suspendedYield",s.arg===P)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o="completed",r.method="throw",r.arg=s.arg)}}}function l(t,e){var r=e.method,o=t.iterator[r];if(void 0===o)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,l(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),P;var i=n(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,P;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,P):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(m.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}ot=function(){return v};var v={},g=Object.prototype,m=g.hasOwnProperty,w=Object.defineProperty||function(t,e,r){t[e]=r.value},b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",L=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(t,e,r){return t[e]=r}}v.wrap=e;var P={},k={};t(k,x,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(d([])));S&&S!==g&&m.call(S,x)&&(k=S);var _=a.prototype=o.prototype=Object.create(k);return i.prototype=a,w(_,"constructor",{value:a,configurable:!0}),w(a,"constructor",{value:i,configurable:!0}),i.displayName=t(a,E,"GeneratorFunction"),v.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},v.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,E,"GeneratorFunction")),e.prototype=Object.create(_),e},v.awrap=function(t){return{__await:t}},c(u.prototype),t(u.prototype,L,(function(){return this})),v.AsyncIterator=u,v.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new u(e(t,r,n,o),i);return v.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},c(_),t(_,E,"Generator"),t(_,x,(function(){return this})),t(_,"toString",(function(){return"[object Generator]"})),v.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},v.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),c=m.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r,n=this.tryEntries.length-1;0<=n;--n)if((r=this.tryEntries[n]).tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,P):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),f(e),P},catch:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;f(e)}return o}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:d(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),P}},v}var it="hpp-iFrame-container",at={createWidget:function(t){var e=arguments;return o(ot().mark((function r(){var n,o,i,a,c,u,s;return ot().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=(n=1<e.length&&void 0!==e[1]?e[1]:{}).container,i=n.visibleMode,a=n.payButton,c=null,r.prev=2,u="true"===t.getNeedSupportApplePay(),c=at.getModifiedAjaxLoader(t),o.appendChild(c),o.style.position="relative",o.style.minHeight="100px",a instanceof Element&&(a.addEventListener("click",(function(e){return t.pay(e,t)})),T.lockArea(a)),!u){r.next=12;break}return r.next=12,G.createWidgetWithApplePay(t);case 12:return r.next=14,U.getWidgetMarkup(t,{visibleMode:i});case 14:s=r.sent,ct.decorateWidgetMarkup({container:o,visibleMode:i,markup:s,core:t}),r.next=23;break;case 18:return r.prev=18,r.t0=r.catch(2),console.error(r.t0),r.next=23,T.callErrorHandler(t,{error:r.t0});case 23:return r.prev=23,o instanceof Element&&(c instanceof Element&&o.removeChild(c),o.style.position="inherit",o.style.minHeight="inherit"),a instanceof Element&&T.unlockArea(a),r.finish(23);case 27:case"end":return r.stop()}}),r,null,[[2,18,23,27]])})))()},decorateWidgetMarkup:function(t){var e=t.container,r=t.visibleMode,n=t.markup,o=t.core,i=document.createElement("div");if(i.className="widget-container",i.style.cssText="\n          max-width: 480px;\n          margin: 0 auto;\n          padding: 28px 0 0;\n          height: 100px;\n          background: transparent;\n          display: flex;\n          justify-content: center;\n          flex-wrap: wrap;\n          border: none;\n          border-radius: 10px;\n",i.innerHTML=n,"button"===r){var a=i.querySelector(".eCheckout-widget");a.style.cursor="pointer",a.addEventListener("click",(function(t){t.preventDefault(),o.pay(t)}))}nt.addMediaQueryListenerForWidget(i),i.querySelector(".widget-header").style.backgroundColor=e.style.backgroundColor,e.appendChild(i)},createIFrameContainer:function(t){var e=t.provideStore(),r=document.createElement("div"),n=e.getValueByKey("ajaxIndicator",ct.createAjaxIndicatorForWidget());return n=n.cloneNode(!0),r.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      background: rgba(0, 0, 0, 0.8);\n      width: 100%;\n      height: 100%;\n      min-width: 320px;\n      z-index: 1000;\n",r.id=e.getValueByKey("hppIframeContainerId",it),r.addEventListener("click",(function(){return at.closeIFrame(t)})),r.appendChild(n),r},createHppIFrame:function(t){var e=t.hppUrl,r=void 0===e?new URL(location.href):e,n=t.iFrameContainer,o=document.createElement("iframe");return o.setAttribute("name","hppIFrame"),o.setAttribute("src",r.href),o.style.cssText="\n        border: none;\n        background: #F2F2F2;\n        position: absolute;\n        border-radius: 10px;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n        z-index: 1001;\n        display: none;\n",nt.addMediaQueryListenerForIFrame(o),n.appendChild(o),o},closeIFrame:function(t){return new Promise((function(e){var r=t.provideStore().getValueByKey("hppIframeContainerId",it),n=document.getElementById(r);n&&n.remove(),setTimeout(e,4)}))},createAjaxIndicatorForWidget:function(){var t=document.createElement("div"),e=document.createElement("div");return t.style.cssText="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);color: #fff;background-color: transparent;padding: 0 15px 5px;z-index: 1000;height: 32px;",t.classList.add("ajax-indicator-container"),e.style.cssText='margin: 5px auto;width: 100px;text-align: center;height: 16px;background-image:url("https://mpi.rncb.ru:8001/resources/Psp/1/HppImage-AjaxLoaderLight");background-repeat: no-repeat;background-position: center;',e.classList.add("ajax-loader"),t.appendChild(e),t.cloneNode(!0)},getModifiedAjaxLoader:function(t){var e=t.provideStore().getValueByKey("ajaxIndicator",ct.createAjaxIndicatorForWidget()),r=(e=e.cloneNode(!0)).querySelector(".ajax-loader");return e.style.maxWidth="100%",e.style.position="absolute",e.style.padding="0",e.style.margin="0",e.style.zIndex="1000",r.style.backgroundImage="url(https://mpi.rncb.ru:8001/resources/Psp/1/HppImage-AjaxLoaderDark)",e}};const ct=at;function ut(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}var st=new WeakMap,lt=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return i(this,t),ut(this,st,{writable:!0,value:null}),h(this,st,e),this}return c(t,[{key:"getValueByKey",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return t&&null!==l(this,st)&&Object.prototype.hasOwnProperty.call(l(this,st),t)?l(this,st)[t]:e}},{key:"setValueByKey",value:function(t,e){return t?(null===l(this,st)&&h(this,st,{}),l(this,st)[t]=e,this.getValueByKey(t)):null}},{key:"removeValueByKey",value:function(t){return t?(null===l(this,st)&&h(this,st,{}),delete l(this,st)[t],t):null}}]),t}();function ht(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */function t(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}function e(t,e,r,n){var i=e&&e.prototype instanceof o?e:o,a=Object.create(i.prototype),c=new p(n||[]);return w(a,"_invoke",{value:s(t,r,c)}),a}function n(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function a(){}function c(e){["next","throw","return"].forEach((function(r){t(e,r,(function(t){return this._invoke(r,t)}))}))}function u(t,e){function o(i,a,c,u){var s=n(t[i],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==r(h)&&m.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var i;w(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function s(t,e,r){var o="suspendedStart";return function(i,a){if("executing"==o)throw new Error("Generator is already running");if("completed"==o){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=l(c,r);if(u){if(u===P)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"==o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var s=n(t,e,r);if("normal"===s.type){if(o=r.done?"completed":"suspendedYield",s.arg===P)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o="completed",r.method="throw",r.arg=s.arg)}}}function l(t,e){var r=e.method,o=t.iterator[r];if(void 0===o)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,l(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),P;var i=n(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,P;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,P):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(m.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}ht=function(){return v};var v={},g=Object.prototype,m=g.hasOwnProperty,w=Object.defineProperty||function(t,e,r){t[e]=r.value},b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",L=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(t,e,r){return t[e]=r}}v.wrap=e;var P={},k={};t(k,x,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(d([])));S&&S!==g&&m.call(S,x)&&(k=S);var _=a.prototype=o.prototype=Object.create(k);return i.prototype=a,w(_,"constructor",{value:a,configurable:!0}),w(a,"constructor",{value:i,configurable:!0}),i.displayName=t(a,E,"GeneratorFunction"),v.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},v.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,E,"GeneratorFunction")),e.prototype=Object.create(_),e},v.awrap=function(t){return{__await:t}},c(u.prototype),t(u.prototype,L,(function(){return this})),v.AsyncIterator=u,v.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new u(e(t,r,n,o),i);return v.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},c(_),t(_,E,"Generator"),t(_,x,(function(){return this})),t(_,"toString",(function(){return"[object Generator]"})),v.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},v.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),c=m.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r,n=this.tryEntries.length-1;0<=n;--n)if((r=this.tryEntries[n]).tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,P):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),f(e),P},catch:function(t){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;f(e)}return o}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:d(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),P}},v}function ft(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pt(t){for(var e,r=1;r<arguments.length;r++)e=null==arguments[r]?{}:arguments[r],r%2?ft(Object(e),!0).forEach((function(r){u(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ft(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}));return t}function dt(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}var yt=new WeakMap,vt=new WeakMap,gt=new WeakMap,mt=new WeakMap,wt=new WeakMap,bt=new WeakMap,xt=function(){function t(){var e=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;i(this,t),dt(this,yt,{writable:!0,value:"https://mpi.rncb.ru:8000"}),dt(this,vt,{writable:!0,value:"https://mpi.rncb.ru:8444"}),dt(this,gt,{writable:!0,value:"https://mpi.rncb.ru:8444/flex"}),dt(this,mt,{writable:!0,value:"flex"}),dt(this,wt,{writable:!0,value:"false"}),dt(this,bt,{writable:!0,value:null}),u(this,"listeners",{}),u(this,"onSuccessHandler",(function(t){ct.closeIFrame(e).then((function(){return T.callSuccessHandler(e,t)}))})),u(this,"onErrorHandler",(function(t,r){var n={order:t};r&&(n.error=r),ct.closeIFrame(e).then((function(){return T.callErrorHandler(e,n)}))}));var o=r.auth||{},a=o.userName,c=o.password;h(this,bt,new lt(r));var s=this.provideStore(),l=r.order,p=void 0===l?{}:l,d={order:p};if(s.setValueByKey("ecNeedCreateOrder",!0),T.orderAuthParamsAreValid(p)){var y=T.getOrderAuthRequisites(p);s.setValueByKey("orderAuthData",y),s.setValueByKey("ecNeedCreateOrder",!1)}r.srcToken&&(d.srcToken=r.srcToken),r.flow&&s.setValueByKey("ecFlow",r.flow);var v=r.terminalId,g=r.merchantId;s.setValueByKey("userName",a),s.setValueByKey("widgetId",this.getWidgetId()),s.setValueByKey("hppUrl",this.getTxpgFesClientHppUrl()),s.setValueByKey("userPassword",c),s.setValueByKey("terminalId",v),s.setValueByKey("merchantId",g),s.setValueByKey("orderDetails",d),s.setValueByKey("ajaxIndicator",ct.createAjaxIndicatorForWidget()),s.setValueByKey("authorizationHeader","Basic ".concat(btoa("".concat(a,":").concat(c)))),f.addExternalCallbacks(pt(pt({},n),{},{core:this})),nt.addMessageEventListeners(this),Object.freeze(this),Object.freeze(this.listeners)}return c(t,[{key:"createWidget",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=e.visibleMode,n=e.payButton,i=this;o(ht().mark((function e(){return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct.createWidget(i,{container:t,visibleMode:r,payButton:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}},{key:"pay",value:function(t){var e,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this;t instanceof Event&&(e=t.currentTarget),o(ht().mark((function t(){return ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.onClickPayButton(r,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}},{key:"setSuccessListener",value:function(t){t instanceof Function&&(this.listeners.onSuccess=t)}},{key:"setFailListener",value:function(t){t instanceof Function&&(this.listeners.onFail=t)}},{key:"setCompleteListener",value:function(t){t instanceof Function&&(this.listeners.onComplete=t)}},{key:"provideStore",value:function(){return l(this,bt)}},{key:"getTxpgFesApiGatewayUrl",value:function(){return l(this,yt)}},{key:"getTxpgFesServerHppUrl",value:function(){return l(this,vt)}},{key:"getTxpgFesClientHppUrl",value:function(){return l(this,gt)}},{key:"getWidgetId",value:function(){return l(this,mt)}},{key:"getNeedSupportApplePay",value:function(){return l(this,wt)}}]),t}(),Lt=window;for(var Et in e)Lt[Et]=e[Et];e.__esModule&&Object.defineProperty(Lt,"__esModule",{value:!0})})();